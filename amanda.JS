// Mostra ou esconde a cartinha üíå
function revealLetter() {
  const letter = document.getElementById('letter');
  letter.classList.toggle('hidden');
}

// Cria um cora√ß√£o flutuante aleat√≥rio
function createHeart() {
  const heart = document.createElement('div');
  heart.classList.add('heart');
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.animationDuration = (3 + Math.random() * 3) + "s";

  document.querySelector('.hearts-container').appendChild(heart);

  setTimeout(() => heart.remove(), 6000);
}

// Come√ßa a criar cora√ß√µes a cada 500ms
setInterval(createHeart, 500);

// Data de in√≠cio do relacionamento
const dataInicio = new Date(2025, 3, 26); // 26 de abril de 2025 (meses come√ßam em 0)

// Atualiza o contador de tempo juntos ‚è≥
function atualizarContador() {
  const agora = new Date();
  const diff = agora - dataInicio;

  const segundos = Math.floor(diff / 1000);
  const minutos = Math.floor(segundos / 60);
  const horas = Math.floor(minutos / 60);
  const dias = Math.floor(horas / 24);

  // Calcula meses e anos de forma mais precisa
  let anos = agora.getFullYear() - dataInicio.getFullYear();
  let meses = agora.getMonth() - dataInicio.getMonth();
  let diasRestantes = agora.getDate() - dataInicio.getDate();

  if (diasRestantes < 0) {
    meses--;
    const ultimoDiaMesAnterior = new Date(agora.getFullYear(), agora.getMonth(), 0).getDate();
    diasRestantes = ultimoDiaMesAnterior + diasRestantes;
  }

  if (meses < 0) {
    anos--;
    meses += 12;
  }
  
  let textoContador = "";
  if (anos > 0) {
      textoContador += `${anos} ano${anos > 1 ? "s" : ""}, `;
  }
  if (meses > 0) {
      textoContador += `${meses} m√™s${meses > 1 ? "es" : ""}, `;
  }
  
  textoContador += `${dias} dias, ${horas % 24} horas, ${minutos % 60} minutos e ${segundos % 60} segundos`;

  const elemento = document.getElementById("tempoJuntos");
  if (elemento) elemento.textContent = textoContador;
}

// Atualiza o temporizador a cada segundo
setInterval(atualizarContador, 1000);
atualizarContador();

// Atualiza o temporizador para o pr√≥ximo dia 26
function atualizarTempoProximoMes() {
  const agora = new Date();
  let proximoMesversario = new Date(agora.getFullYear(), agora.getMonth(), 26);

  if (agora.getDate() > 26 || (agora.getDate() === 26 && agora.getHours() >= 0)) {
    proximoMesversario.setMonth(proximoMesversario.getMonth() + 1);
  }

  const diffRestante = proximoMesversario - agora;

  const segundos = Math.floor(diffRestante / 1000);
  const minutos = Math.floor(segundos / 60);
  const horas = Math.floor(minutos / 60);
  const dias = Math.floor(horas / 24);

  const texto = `‚è≥ Faltam ${dias} dias, ${horas % 24} horas, ${minutos % 60} minutos e ${segundos % 60} segundos para completarmos mais um m√™s juntos üíñ`;

  const elemento = document.getElementById("tempoProximoMes");
  if (elemento) elemento.textContent = texto;
}

// Atualiza o temporizador do pr√≥ximo m√™s a cada segundo
setInterval(atualizarTempoProximoMes, 1000);
atualizarTempoProximoMes();

// Verifica se hoje √© mesvers√°rio e exibe mensagem
function verificarMesversario() {
  const agora = new Date();
  const diaAtual = agora.getDate();
  const elemento = document.getElementById("mensagemMesversario");

  if (diaAtual === dataInicio.getDate()) {
    let anos = agora.getFullYear() - dataInicio.getFullYear();
    let meses = agora.getMonth() - dataInicio.getMonth() + anos * 12;

    if (meses > 0) {
      elemento.textContent = `üéâ Hoje completamos ${meses} m√™s${meses > 1 ? "es" : ""} juntos, meu amor! üíï`;
    } else {
      elemento.textContent = "";
    }
  } else {
    elemento.textContent = ""; // Esconde se n√£o for dia 26
  }
}

// Executa a verifica√ß√£o do mesvers√°rio a cada 1 minuto
setInterval(verificarMesversario, 60000);
verificarMesversario();

// Mensagem autom√°tica por hor√°rio
function mensagemPorHorario() {
  const hora = new Date().getHours();
  const mensagemEl = document.getElementById("mensagemHora");

  let mensagem = "";
  if (hora >= 5 && hora < 12) mensagem = "Bom dia, minha princesa üíï";
  else if (hora >= 12 && hora < 18) mensagem = "Boa tarde, meu amor, j√° almo√ßou?";
  else if (hora >= 18 && hora < 22) mensagem = "Boa noite minha princesa, eu te amo muito ‚ù§";
  else mensagem = "J√° era pra estar dormindo... üò¥üí§";

  if (mensagemEl) mensagemEl.textContent = mensagem;
}

// Atualiza a mensagem ao carregar a p√°gina
mensagemPorHorario();

// Ativa modo noturno autom√°tico üåô
function ativarModoNoturno() {
  const hora = new Date().getHours();
  if (hora >= 18 || hora < 6) {
    document.body.classList.add("night-mode");
    criarEstrelas();
  }
}

// Gera estrelas animadas para o modo noturno
function criarEstrelas() {
  for (let i = 0; i < 100; i++) {
    const estrela = document.createElement("div");
    estrela.classList.add("star");
    estrela.style.top = Math.random() * 100 + "vh";
    estrela.style.left = Math.random() * 100 + "vw";
    estrela.style.animationDuration = (1 + Math.random() * 2) + "s";

    document.body.appendChild(estrela);
  }
}

// Ativa o modo noturno se o hor√°rio permitir
ativarModoNoturno();
